<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>React Web App Guidelines</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 2rem;
      line-height: 1.7;
      background: #fff;
      color: #111;
    }
    h1, h2, h3 {
      color: #222;
      margin-top: 2rem;
    }
    pre {
      background: #f6f8fa;
      padding: 1rem;
      overflow-x: auto;
    }
    code {
      font-family: monospace;
    }
    .mermaid {
      background: #fafafa;
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      margin-top: 1rem;
    }
  </style>
  <script>
    mermaid.initialize({ startOnLoad: true });
  </script>
</head>
<body>
  <h1>✅ React Web App Development Guidelines</h1>

  <p>Tailored for development in <strong>Visual Studio Code</strong> with <strong>Augment</strong> and designed for scalability, modularity, and security.</p>

  <h2>🔒 Storage & Data Handling</h2>
  <ul>
    <li>Use <code>IndexedDB</code> via <a href="https://www.npmjs.com/package/idb">idb</a>, <a href="https://dexie.org/">Dexie</a>, or custom wrappers.</li>
    <li>Wrap operations in Promise-based modules.</li>
    <li>Enforce versioned schemas and implement data migrations.</li>
    <li>Create React hooks like <code>usePersistentStore()</code> for encapsulation.</li>
    <li>Implement a 2-step factory reset mechanism (UI trigger & modal confirmation).</li>
    <li>Handle <code>QuotaExceededError</code> gracefully and notify users.</li>
    <li>Encrypt sensitive values using <code>crypto-js</code> or <code>crypto.subtle</code>.</li>
    <li>Avoid storing tokens, passwords, or credentials in localStorage.</li>
  </ul>

  <h2>🧱 Architecture & Design Patterns</h2>
  <ul>
    <li>Use an adapted MVC model for React:</li>
    <ul>
      <li><strong>Model:</strong> Services, APIs, persistent storage.</li>
      <li><strong>View:</strong> Stateless React components.</li>
      <li><strong>Controller:</strong> Hooks and context providers.</li>
    </ul>
    <li>Implement Model Context Protocol (MCP).</li>
    <li>Normalize API data using reducer mapping or libraries like <code>normalizr</code>.</li>
    <li>Use feature flags and policy-based access control (HOCs/hooks).</li>
    <li>Apply secure-by-design principles: CSP, SRI, secure origins.</li>
  </ul>

  <h2>🧠 Model Context Protocol (MCP)</h2>
  <p>The backbone of all internal and external stateful communication.</p>
  <ul>
    <li><strong>SessionManager:</strong> Auth and token lifecycle</li>
    <li><strong>MemoryCache:</strong> Settings, drafts, persistent local state</li>
    <li><strong>ToolRegistry:</strong> Role-based feature loader</li>
    <li><strong>StateSyncEngine:</strong> Real-time state updates and conflict resolution</li>
  </ul>

  <h3>Mermaid Diagram: MCP Architecture</h3>
  <div class="mermaid">
    graph TD
      UI[React UI] --> |Hooks| SessionManager
      UI --> |Context| MemoryCache
      UI --> |Role Hooks| ToolRegistry
      UI --> |useEffect| StateSyncEngine
      SessionManager --> API[/session endpoint/]
      MemoryCache --> API2[/memory endpoint/]
      ToolRegistry --> API3[/tools/:role endpoint/]
      StateSyncEngine --> API4[/state/:id endpoint/]
  </div>

  <h2>💡 Code Safety & Best Practices</h2>
  <ul>
    <li>Use <code>'use strict'</code> mode globally.</li>
    <li>Descriptive naming: <code>useUserSession</code>, <code>FormStateProvider</code>.</li>
    <li>Validate and sanitize all inputs using <code>yup</code>, <code>zod</code>, or <code>react-hook-form</code>.</li>
    <li>Avoid global scope leaks—use modules and state managers like Zustand or Redux Toolkit.</li>
    <li>Include error boundaries, fetch abort controllers, and retry logic.</li>
  </ul>

  <h2>📄 Documentation & Versioning</h2>
  <ul>
    <li>Use TSDoc/JSDoc to document all custom hooks, functions, contexts, and APIs.</li>
    <li>Maintain a detailed <code>README.md</code> and <code>CHANGELOG.md</code>.</li>
    <li>Use <code>.env.local</code> for secrets and <code>.env.example</code> as a safe template.</li>
    <li>Generate <code>/docs/</code> folder with Swagger/OpenAPI, Mermaid, Madge, etc.</li>
  </ul>

  <h2>🧑‍🦽 UI/UX & Accessibility</h2>
  <ul>
    <li>Use semantic HTML and ARIA roles.</li>
    <li>Implement dark mode and responsive layout via CSS variables and media queries.</li>
    <li>Provide skeleton loaders and <code>&lt;noscript&gt;</code> fallbacks.</li>
    <li>Support keyboard navigation, screen readers, and accessibility audit tools.</li>
  </ul>

  <h2>🚀 Performance & Optimization</h2>
  <ul>
    <li>Lazy-load components and routes with <code>React.lazy</code>.</li>
    <li>Use service workers and manifest for PWA features.</li>
    <li>Defer non-critical assets and optimize event listeners.</li>
    <li>Monitor performance with Lighthouse, web-vitals, and Chrome DevTools.</li>
  </ul>

  <h2>🧪 Testing & Build Pipeline</h2>
  <ul>
    <li>Use <code>jest</code>, <code>@testing-library/react</code>, and <code>cypress</code>.</li>
    <li>Integrate with GitHub Actions for CI/CD.</li>
    <li>Track code coverage and enforce lint/build/test gates on all PRs.</li>
  </ul>

  <h2>♻️ Reusable Design Patterns</h2>
  <ul>
    <li>Dependency Injection via Context Providers</li>
    <li>Observer pattern with <code>useEffect</code></li>
    <li>State Machines with <a href="https://xstate.js.org/">XState</a></li>
    <li>Command, Strategy, Adapter, Facade, and Repository patterns</li>
  </ul>

  <h2>🔐 Security</h2>
  <ul>
    <li>Use CSP nonces for inline scripts.</li>
    <li>Apply Zero Trust: validate all tokens server-side.</li>
    <li>Enforce Least Privilege at both UI and API layers.</li>
  </ul>

  <hr />

  <footer>
    <p><strong>Contact:</strong></p>
    <p>🌐 <a href="https://mytech.today">myTech.Today</a></p>
    <p>📧 <a href="mailto:sales@mytech.today">sales@mytech.today</a></p>
    <p>📞 <a href="tel:+18477674914">(847) 767-4914</a></p>
    <p>🧑‍💻 <a href="https://github.com/mytech-today-now">@mytech-today-now</a></p>
    <p>📍 Barrington, IL</p>
  </footer>
</body>
</html>
